function getUsers(e){$.ajax({url:ENDPOINT+"/admin/users",type:"GET",data:e}).done((function(e){sessionStorage.setItem("users_paging_token",null!=e.paginationToken?e.PaginationToken:""),$("#users-list").html(""),e.data.forEach(e=>{$("#users-list").append(renderUserHtml(e))})})).fail((function(e){console.log("error - ",e),$.toast({icon:"danger",text:"<p class='p-3'>Failed to Get Users</p>",delay:"3000",position:"top-right",dismissible:!1})}))}function renderUsersList(){}function uploadFile(e,s){$("#"+s).croppie("result",{type:"blob",size:"viewport"}).then((function(t){let n=t;$.ajax({url:e,type:"PUT",data:n,contentType:"image/jpeg",processData:!1,cache:!1,error:function(e){console.log("error",e)},success:function(e){console.log("success -"+s,e)}})}))}getUsers(),$("#users-filter-form").on("submit",(function(e){e.preventDefault();let s=form2js(this,".",!0,null);s.filter_name="sub",console.log(s),getUsers(s)})),$("#send-invite").change((function(){this.checked?$("#send-invite-email,#send-invite-sms").removeAttr("disabled"):$("#send-invite-email, #send-invite-sms").attr("disabled","disabled")})),1==$("#send-invite-sms").prop("checked")&&$("#new-user-phone").val(),$("#create-user").on("submit",(function(e){if(e.preventDefault(),1==$("#send-invite").prop("checked")&&1==$("#send-invite-sms").prop("checked")&&""==$("#new-user-phone").val())return void $(".error-msg").removeClass("d-none").html("You must enter a phone number if SMS is checked as a desired delivery medium.");let s=form2js("create-user",".",!0,null);null!=s.phone_number&&(s.phone_number="+"+$(".tel-phone-input").intlTelInput("getSelectedCountryData").dialCode+s.phone_number),console.log("create user form data - ",s),$.ajax({url:CORS+ENDPOINT+"/admin/users",method:"POST",crossDomain:!0,dataType:"json",data:JSON.stringify(s),processData:!1}).done((function(e){if(201!=e.statusCode||e.hasOwnProperty("message"))return $(".error-msg").removeClass("d-none").html(e.message),void dangerToast("Unable to Create User");$(".modal").modal("hide"),successToast("Successfully created new user"),$("#create-user").trigger("reset")})).fail((function(e){console.log("error - ",e),dangerToast("Error Connecting to Server")}))})),$("#update-user").on("submit",(function(e){e.preventDefault();let s=form2js("update-user",".",!0,null);null!=s.phone_number&&(s.phone_number="+"+$(".tel-phone-input").intlTelInput("getSelectedCountryData").dialCode+s.phone_number),console.log("update user form data - ",s),asyncResponse("PUT","/admin/users",s,e=>{200!=e.statusCode||e.hasOwnProperty("message")?$(".error-msg").removeClass("d-none").html(e.message):(console.log(e),e.hasOwnProperty("custom:emirates_id_front")&&uploadFile(e["custom:emirates_id_front"],"emirates_id_front_preview"),e.hasOwnProperty("custom:emirates_id_back")&&uploadFile(e["custom:emirates_id_back"],"emirates_id_back_preview"),e.hasOwnProperty("profile")&&uploadFile(e.profile,"profile_preview"),$(".modal").modal("hide"),successToast("Successful"),$("#update-user").trigger("reset"))})}));